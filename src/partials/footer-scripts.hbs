<script src="{{{uiRootPath}}}/js/site.js"></script>
<script async src="{{{uiRootPath}}}/js/vendor/highlight.js"></script>
<script async src="{{{uiRootPath}}}/js/vendor/clipboard.js"></script>
<script async src="{{{uiRootPath}}}/js/vendor/medium-zoom.js"></script>
<script async src="{{{uiRootPath}}}/js/vendor/collapse.js"></script>

{{!-- Native Search Widget --}}
<script src="{{{uiRootPath}}}/js/vendor/magnolia-search.js"></script>

<script type="text/javascript">
(function() {
  'use strict';
  
  function initNativeSearch() {
    if (typeof MagnoliaSearchUI === 'undefined') {
      console.warn('MagnoliaSearchUI not loaded');
      return;
    }
    
    var container = document.getElementById('nativeSearch');
    if (!container) {
      console.warn('Search container #nativeSearch not found');
      return;
    }
    
    new MagnoliaSearchUI({
      container: '#nativeSearch',
      indexUrl: '/search-data/search-index.min.json',
      metadataUrl: '/search-data/metadata.json',
      placeholder: 'Search Magnolia docsâ€¦',
      hotkey: '/',
      maxResults: 15,
      showFilters: true,
      showFooter: true,
      branding: 'Powered by Magnolia NativeSearch',
      filters: [
        { key: '', label: 'All' },
        { key: 'latest', label: 'Latest' },
        { key: '6.3', label: '6.3' },
        { key: '6.2', label: '6.2' },
        { key: 'cloud', label: 'DX Cloud' },
        { key: 'modules', label: 'Modules' }
      ]
    });
  }
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNativeSearch);
  } else {
    initNativeSearch();
  }
  
  function toggleDropDown() {
    var linkEl = document.querySelectorAll('.has-dropdown');
    var allDrops = document.querySelectorAll('.has-dropdown .navbar-dropdown');
    for (var i = 0; i < linkEl.length; i++) {
      linkEl[i].addEventListener('click', function(e) {
        for (var j = 0; j < allDrops.length; j++) {
          allDrops[j].style.display = "none";
        }
        e.stopPropagation();
        if (e.target.nextElementSibling) {
          e.target.nextElementSibling.style.display = "block";
        }
      });
    }
  }
  
  if (window.innerWidth < 1200) {
    toggleDropDown();
  }
})();
</script>